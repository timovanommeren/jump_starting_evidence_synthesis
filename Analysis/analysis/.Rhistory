#set reference category for regression model
simulation <- simulation %>% mutate(condition = relevel(factor(condition), ref = "llm"))
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
Intercept_variances = as.data.frame(VarCorr(model0))
ICC = Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] / (Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] + Intercept_variances[Intercept_variances$grp == 'Residual','vcov'])
print(ICC)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
?lmer
model1 <- lmer(td ~ condition  + (1|dataset), REML = T, data = simulation)
summary(model1)
anova(model1, model0)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
qqnorm(ranef(model_5)$class[,1])
library(here)
source(here("Analysis/R/00_packages.R"))
source(here("Analysis/R/01_load_data.R"))
source(here("Analysis/R/02_prepare_data.R"))
source(here("Analysis/R/03_descriptives.R"))
# source(here("R/04_models.R"))
# source(here("R/05_plots.R"))
load_packages()
# import simulation results and metadata (specify paths relative to project root)
raw <- load_simulation_data(data = "simulation_results/adding_NAs/all_simulation_results.csv",
metadata = "Analysis/percentage_relevant.csv")
# (1) transform simulation data to wide
# (2) adjust metadata column names, and,
# (3) add the number of records and percent_rel of relevant records from metadata to simulation data (these will serve as group-level predictors in multilevel model)
processed <- prepare_data(raw$simulation, raw$meta)
# assign to variables for easier access
simulation_long <- raw$simulation
simulation      <- processed$simulation
metadata        <- processed$meta
head(simulation)
summary(simulation)
#export summary data to latex format text file
descriptive_barchart(simulation, metadata)
#check the assumption of homogeneity of variance across conditions
ggplot(simulation, aes(x = condition, y = td)) +
geom_boxplot() +
geom_jitter(width = 0.1, alpha = .3)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = percent_rel, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Percentage of relevant records vs. number of relevant records found",
x = "percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = records, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Total number of records vs. number of relevant records found",
x = "Percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
#set reference category for regression model
simulation <- simulation %>% mutate(condition = relevel(factor(condition), ref = "llm"))
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
Intercept_variances = as.data.frame(VarCorr(model0))
ICC = Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] / (Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] + Intercept_variances[Intercept_variances$grp == 'Residual','vcov'])
print(ICC)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
model2 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + (1|dataset), REML = F, data = simulation)
qqnorm(ranef(model_5)$class[,1])
qqnorm(ranef(model5)$class[,1])
simulation <- simulation %>%
mutate(
# indicator where llm parameters are actually defined
llm_active = (condition == "llm"),
# set to 0 if not llm condition (two-part coding)
n_abstracts = ifelse(
llm_active,
n_abstracts - mean(n_abstracts[llm_active], na.rm = TRUE),
0
),
length_abstracts = ifelse(
llm_active,
length_abstracts  - mean(length_abstracts[llm_active], na.rm = TRUE),
0
),
llm_temperature = ifelse(
llm_active,
llm_temperature - mean(llm_temperature[llm_active], na.rm = TRUE),
0
)
)
library(here)
source(here("Analysis/R/00_packages.R"))
source(here("Analysis/R/01_load_data.R"))
source(here("Analysis/R/02_prepare_data.R"))
source(here("Analysis/R/03_descriptives.R"))
# source(here("R/04_models.R"))
# source(here("R/05_plots.R"))
load_packages()
# import simulation results and metadata (specify paths relative to project root)
raw <- load_simulation_data(data = "simulation_results/adding_NAs/all_simulation_results.csv",
metadata = "Analysis/percentage_relevant.csv")
# (1) transform simulation data to wide
# (2) adjust metadata column names, and,
# (3) add the number of records and percent_rel of relevant records from metadata to simulation data (these will serve as group-level predictors in multilevel model)
processed <- prepare_data(raw$simulation, raw$meta)
# assign to variables for easier access
simulation_long <- raw$simulation
simulation      <- processed$simulation
metadata        <- processed$meta
head(simulation)
summary(simulation)
#export summary data to latex format text file
simulation <- simulation %>%
mutate(
# indicator where llm parameters are actually defined
llm_active = (condition == "llm"),
# set to 0 if not llm condition (two-part coding)
n_abstracts = ifelse(
llm_active,
n_abstracts - mean(n_abstracts[llm_active], na.rm = TRUE),
0
),
length_abstracts = ifelse(
llm_active,
length_abstracts  - mean(length_abstracts[llm_active], na.rm = TRUE),
0
),
llm_temperature = ifelse(
llm_active,
llm_temperature - mean(llm_temperature[llm_active], na.rm = TRUE),
0
)
)
descriptive_barchart(simulation, metadata)
#check the assumption of homogeneity of variance across conditions
ggplot(simulation, aes(x = condition, y = td)) +
geom_boxplot() +
geom_jitter(width = 0.1, alpha = .3)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = percent_rel, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Percentage of relevant records vs. number of relevant records found",
x = "percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = records, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Total number of records vs. number of relevant records found",
x = "Percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
#set reference category for regression model
simulation <- simulation %>% mutate(condition = relevel(factor(condition), ref = "llm"))
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
Intercept_variances = as.data.frame(VarCorr(model0))
ICC = Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] / (Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] + Intercept_variances[Intercept_variances$grp == 'Residual','vcov'])
print(ICC)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
model2 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + (1|dataset), REML = F, data = simulation)
summary(model2)
anova(model2, model1)
model3 <- lmer(td ~ condition + records + percent_rel + (1|dataset), REML = F, data = simulation)
summary(model3)
anova(model3, model2)
model4 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + records + percent_rel + (condition|dataset), REML = F, data = simulation)
summary(model4)
anova(model4, model3)
model5 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + records + percent_rel + condition*percent_rel + (condition|dataset), REML = F, data = simulation)
summary(model5)
anova(model5, model4)
qqnorm(ranef(model5)$class[,1])
model5 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + records + percent_rel + condition*percent_rel + (condition|dataset), REML = F, data = simulation)
summary(model5)
anova(model5, model4)
qqnorm(ranef(model5)$class[,1])
model5
ranef(model5
ranef(model5)
ranef(model5)
anef(model5)$class
ranef(model5)$class
ranef(model5)
qqnorm(ranef(model5)$dataset[,1])
qqnorm(ranef(model5)$dataset[,2])
qqnorm(ranef(model5)$dataset[,1])
qqnorm(ranef(model5)$dataset[,1])
qqnorm(ranef(model5)$dataset[,2])
qqnorm(ranef(model5)$dataset[,3])
ranef(model5)
ranef(model5)$dataset
qqnorm(ranef(model5)$dataset[,1])
qqnorm(ranef(model5)$dataset[,2])
qqnorm(ranef(model5)$dataset[,3])
#plot QQ plots of residuals
qqnorm(residuals(model5))
#plot QQ plots of residuals
qqnorm(residuals(model5))
ranef(model5)$dataset
#plot QQ plots of residuals
qqnorm(residuals(model5))
#plot QQ plots of random means
qqnorm(ranef(model5)$dataset[,1])
#plot QQ plots of random effect with no initialization condition
qqnorm(ranef(model5)$dataset[,2])
#plot QQ plots of random effect with random initialization condition
qqnorm(ranef(model5)$dataset[,3])
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
library(here)
source(here("Analysis/R/00_packages.R"))
source(here("Analysis/R/01_load_data.R"))
source(here("Analysis/R/02_prepare_data.R"))
source(here("Analysis/R/03_descriptives.R"))
# source(here("R/04_models.R"))
# source(here("R/05_plots.R"))
load_packages()
# import simulation results and metadata (specify paths relative to project root)
raw <- load_simulation_data(data = "simulation_results/adding_NAs/all_simulation_results.csv",
metadata = "Analysis/percentage_relevant.csv")
# (1) transform simulation data to wide
# (2) adjust metadata column names, and,
# (3) add the number of records and percent_rel of relevant records from metadata to simulation data (these will serve as group-level predictors in multilevel model)
processed <- prepare_data(raw$simulation, raw$meta)
# assign to variables for easier access
simulation_long <- raw$simulation
simulation      <- processed$simulation
metadata        <- processed$meta
head(simulation)
summary(simulation)
#export summary data to latex format text file
simulation <- simulation %>%
mutate(
# indicator where llm parameters are actually defined
llm_active = (condition == "llm"),
# set to 0 if not llm condition (two-part coding)
n_abstracts = ifelse(
llm_active,
n_abstracts, # - mean(n_abstracts[llm_active], na.rm = TRUE),
0
),
length_abstracts = ifelse(
llm_active,
length_abstracts, #  - mean(length_abstracts[llm_active], na.rm = TRUE),
0
),
llm_temperature = ifelse(
llm_active,
llm_temperature, # - mean(llm_temperature[llm_active], na.rm = TRUE),
0
)
)
descriptive_barchart(simulation, metadata)
#check the assumption of homogeneity of variance across conditions
ggplot(simulation, aes(x = condition, y = td)) +
geom_boxplot() +
geom_jitter(width = 0.1, alpha = .3)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = percent_rel, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Percentage of relevant records vs. number of relevant records found",
x = "percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = records, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Total number of records vs. number of relevant records found",
x = "Percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
model2 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + (1|dataset), REML = F, data = simulation)
summary(model2)
anova(model2, model1)
model3 <- lmer(td ~ condition + records + percent_rel + (1|dataset), REML = F, data = simulation)
summary(model3)
anova(model3, model2)
library(here)
source(here("Analysis/R/00_packages.R"))
source(here("Analysis/R/01_load_data.R"))
source(here("Analysis/R/02_prepare_data.R"))
source(here("Analysis/R/03_descriptives.R"))
# source(here("R/04_models.R"))
# source(here("R/05_plots.R"))
load_packages()
# import simulation results and metadata (specify paths relative to project root)
raw <- load_simulation_data(data = "simulation_results/adding_NAs/all_simulation_results.csv",
metadata = "Analysis/percentage_relevant.csv")
# (1) transform simulation data to wide
# (2) adjust metadata column names, and,
# (3) add the number of records and percent_rel of relevant records from metadata to simulation data (these will serve as group-level predictors in multilevel model)
processed <- prepare_data(raw$simulation, raw$meta)
# assign to variables for easier access
simulation_long <- raw$simulation
simulation      <- processed$simulation
metadata        <- processed$meta
head(simulation)
summary(simulation)
#export summary data to latex format text file
simulation <- simulation %>%
mutate(
# indicator where llm parameters are actually defined
llm_active = (condition == "llm"),
# set to 0 if not llm condition (two-part coding)
n_abstracts = ifelse(
llm_active,
n_abstracts - mean(n_abstracts[llm_active], na.rm = TRUE),
0
),
length_abstracts = ifelse(
llm_active,
length_abstracts  - mean(length_abstracts[llm_active], na.rm = TRUE),
0
),
llm_temperature = ifelse(
llm_active,
llm_temperature - mean(llm_temperature[llm_active], na.rm = TRUE),
0
)
)
descriptive_barchart(simulation, metadata)
#check the assumption of homogeneity of variance across conditions
ggplot(simulation, aes(x = condition, y = td)) +
geom_boxplot() +
geom_jitter(width = 0.1, alpha = .3)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = percent_rel, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Percentage of relevant records vs. number of relevant records found",
x = "percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
# check the assumption of linearity between percentage and relevant records found
ggplot(simulation,
aes(x = records, y = td)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm",
aes(color = "linear"),
se = FALSE) +
geom_smooth(method = "lm",
formula = y ~ x + I(x^2),
aes(color = "quadratic"),
se = FALSE) +
labs(
title = "Total number of records vs. number of relevant records found",
x = "Percentage of relevant records",
y = "Number of relevant records found in first 100 screened"
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
panel.background = element_rect(fill = "white", color = NA),
plot.background  = element_rect(fill = "white", color = NA),
legend.background = element_rect(fill = "white", color = NA),
legend.key = element_rect(fill = "white", color = NA),
plot.margin = margin(10, 20, 10, 10)
)
#set reference category for regression model
simulation <- simulation %>% mutate(condition = relevel(factor(condition), ref = "llm"))
model0 <- lmer(td ~ 1 + (1|dataset), REML = F, data = simulation)
summary(model0)
Intercept_variances = as.data.frame(VarCorr(model0))
ICC = Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] / (Intercept_variances[Intercept_variances$grp == 'dataset','vcov'] + Intercept_variances[Intercept_variances$grp == 'Residual','vcov'])
print(ICC)
model1 <- lmer(td ~ condition  + (1|dataset), REML = F, data = simulation)
summary(model1)
anova(model1, model0)
model2 <- lmer(td ~ condition + n_abstracts + length_abstracts + llm_temperature + (1|dataset), REML = F, data = simulation)
summary(model2)
anova(model2, model1)
model3 <- lmer(td ~ condition + records + percent_rel + (1|dataset), REML = F, data = simulation)
summary(model3)
anova(model3, model2)
